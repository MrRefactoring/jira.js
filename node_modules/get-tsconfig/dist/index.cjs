"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ge=require("path"),me=require("fs"),ke=require("module"),be=require("resolve-pkg-maps");function S(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var p=S(ge),V=S(me),ve=S(ke);function _(e){return e.startsWith("\\\\?\\")?e:e.replace(/\\/g,"/")}const y=e=>{const l=V.default[e];return function(i,...n){const t=`${e}:${n.join(":")}`;let o=i==null?void 0:i.get(t);return o===void 0&&(o=Reflect.apply(l,V.default,n),i==null||i.set(t,o)),o}},$=y("existsSync"),Te=y("realpathSync"),we=y("readFileSync"),P=y("statSync"),Z=(e,l,i)=>{for(;;){const n=p.default.posix.join(e,l);if($(i,n))return n;const t=p.default.dirname(e);if(t===e)return;e=t}},M=/^\.{1,2}(\/.*)?$/,W=e=>{const l=_(e);return M.test(l)?l:`./${l}`};function Oe(e,l=!1){const i=e.length;let n=0,t="",o=0,s=16,g=0,f=0,b=0,w=0,r=0;function B(u,a){let c=0,A=0;for(;c<u||!a;){let O=e.charCodeAt(n);if(O>=48&&O<=57)A=A*16+O-48;else if(O>=65&&O<=70)A=A*16+O-65+10;else if(O>=97&&O<=102)A=A*16+O-97+10;else break;n++,c++}return c<u&&(A=-1),A}function v(u){n=u,t="",o=0,s=16,r=0}function T(){let u=n;if(e.charCodeAt(n)===48)n++;else for(n++;n<e.length&&U(e.charCodeAt(n));)n++;if(n<e.length&&e.charCodeAt(n)===46)if(n++,n<e.length&&U(e.charCodeAt(n)))for(n++;n<e.length&&U(e.charCodeAt(n));)n++;else return r=3,e.substring(u,n);let a=n;if(n<e.length&&(e.charCodeAt(n)===69||e.charCodeAt(n)===101))if(n++,(n<e.length&&e.charCodeAt(n)===43||e.charCodeAt(n)===45)&&n++,n<e.length&&U(e.charCodeAt(n))){for(n++;n<e.length&&U(e.charCodeAt(n));)n++;a=n}else r=3;return e.substring(u,a)}function k(){let u="",a=n;for(;;){if(n>=i){u+=e.substring(a,n),r=2;break}const c=e.charCodeAt(n);if(c===34){u+=e.substring(a,n),n++;break}if(c===92){if(u+=e.substring(a,n),n++,n>=i){r=2;break}switch(e.charCodeAt(n++)){case 34:u+='"';break;case 92:u+="\\";break;case 47:u+="/";break;case 98:u+="\b";break;case 102:u+="\f";break;case 110:u+=`
`;break;case 114:u+="\r";break;case 116:u+="	";break;case 117:const O=B(4,!0);O>=0?u+=String.fromCharCode(O):r=4;break;default:r=5}a=n;continue}if(c>=0&&c<=31)if(F(c)){u+=e.substring(a,n),r=2;break}else r=6;n++}return u}function j(){if(t="",r=0,o=n,f=g,w=b,n>=i)return o=i,s=17;let u=e.charCodeAt(n);if(J(u)){do n++,t+=String.fromCharCode(u),u=e.charCodeAt(n);while(J(u));return s=15}if(F(u))return n++,t+=String.fromCharCode(u),u===13&&e.charCodeAt(n)===10&&(n++,t+=`
`),g++,b=n,s=14;switch(u){case 123:return n++,s=1;case 125:return n++,s=2;case 91:return n++,s=3;case 93:return n++,s=4;case 58:return n++,s=6;case 44:return n++,s=5;case 34:return n++,t=k(),s=10;case 47:const a=n-1;if(e.charCodeAt(n+1)===47){for(n+=2;n<i&&!F(e.charCodeAt(n));)n++;return t=e.substring(a,n),s=12}if(e.charCodeAt(n+1)===42){n+=2;const c=i-1;let A=!1;for(;n<c;){const O=e.charCodeAt(n);if(O===42&&e.charCodeAt(n+1)===47){n+=2,A=!0;break}n++,F(O)&&(O===13&&e.charCodeAt(n)===10&&n++,g++,b=n)}return A||(n++,r=1),t=e.substring(a,n),s=13}return t+=String.fromCharCode(u),n++,s=16;case 45:if(t+=String.fromCharCode(u),n++,n===i||!U(e.charCodeAt(n)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return t+=T(),s=11;default:for(;n<i&&L(u);)n++,u=e.charCodeAt(n);if(o!==n){switch(t=e.substring(o,n),t){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return t+=String.fromCharCode(u),n++,s=16}}function L(u){if(J(u)||F(u))return!1;switch(u){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function E(){let u;do u=j();while(u>=12&&u<=15);return u}return{setPosition:v,getPosition:()=>n,scan:l?E:j,getToken:()=>s,getTokenValue:()=>t,getTokenOffset:()=>o,getTokenLength:()=>n-o,getTokenStartLine:()=>f,getTokenStartCharacter:()=>o-w,getTokenError:()=>r}}function J(e){return e===32||e===9}function F(e){return e===10||e===13}function U(e){return e>=48&&e<=57}var K;(function(e){e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.space=32]="space",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.asterisk=42]="asterisk",e[e.backslash=92]="backslash",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.plus=43]="plus",e[e.slash=47]="slash",e[e.formFeed=12]="formFeed",e[e.tab=9]="tab"})(K||(K={}));var x;(function(e){e.DEFAULT={allowTrailingComma:!1}})(x||(x={}));function de(e,l=[],i=x.DEFAULT){let n=null,t=[];const o=[];function s(f){Array.isArray(t)?t.push(f):n!==null&&(t[n]=f)}return je(e,{onObjectBegin:()=>{const f={};s(f),o.push(t),t=f,n=null},onObjectProperty:f=>{n=f},onObjectEnd:()=>{t=o.pop()},onArrayBegin:()=>{const f=[];s(f),o.push(t),t=f,n=null},onArrayEnd:()=>{t=o.pop()},onLiteralValue:s,onError:(f,b,w)=>{l.push({error:f,offset:b,length:w})}},i),t[0]}function je(e,l,i=x.DEFAULT){const n=Oe(e,!1),t=[];function o(m){return m?()=>m(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter()):()=>!0}function s(m){return m?()=>m(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter(),()=>t.slice()):()=>!0}function g(m){return m?d=>m(d,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter()):()=>!0}function f(m){return m?d=>m(d,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter(),()=>t.slice()):()=>!0}const b=s(l.onObjectBegin),w=f(l.onObjectProperty),r=o(l.onObjectEnd),B=s(l.onArrayBegin),v=o(l.onArrayEnd),T=f(l.onLiteralValue),k=g(l.onSeparator),j=o(l.onComment),L=g(l.onError),E=i&&i.disallowComments,u=i&&i.allowTrailingComma;function a(){for(;;){const m=n.scan();switch(n.getTokenError()){case 4:c(14);break;case 5:c(15);break;case 3:c(13);break;case 1:E||c(11);break;case 2:c(12);break;case 6:c(16);break}switch(m){case 12:case 13:E?c(10):j();break;case 16:c(1);break;case 15:case 14:break;default:return m}}}function c(m,d=[],Y=[]){if(L(m),d.length+Y.length>0){let N=n.getToken();for(;N!==17;){if(d.indexOf(N)!==-1){a();break}else if(Y.indexOf(N)!==-1)break;N=a()}}}function A(m){const d=n.getTokenValue();return m?T(d):(w(d),t.push(d)),a(),!0}function O(){switch(n.getToken()){case 11:const m=n.getTokenValue();let d=Number(m);isNaN(d)&&(c(2),d=0),T(d);break;case 7:T(null);break;case 8:T(!0);break;case 9:T(!1);break;default:return!1}return a(),!0}function ce(){return n.getToken()!==10?(c(3,[],[2,5]),!1):(A(!1),n.getToken()===6?(k(":"),a(),h()||c(4,[],[2,5])):c(5,[],[2,5]),t.pop(),!0)}function pe(){b(),a();let m=!1;for(;n.getToken()!==2&&n.getToken()!==17;){if(n.getToken()===5){if(m||c(4,[],[]),k(","),a(),n.getToken()===2&&u)break}else m&&c(6,[],[]);ce()||c(4,[],[2,5]),m=!0}return r(),n.getToken()!==2?c(7,[2],[]):a(),!0}function ae(){B(),a();let m=!0,d=!1;for(;n.getToken()!==4&&n.getToken()!==17;){if(n.getToken()===5){if(d||c(4,[],[]),k(","),a(),n.getToken()===4&&u)break}else d&&c(6,[],[]);m?(t.push(0),m=!1):t[t.length-1]++,h()||c(4,[],[4,5]),d=!0}return v(),m||t.pop(),n.getToken()!==4?c(8,[4],[]):a(),!0}function h(){switch(n.getToken()){case 3:return ae();case 1:return pe();case 10:return A(!0);default:return O()}}return a(),n.getToken()===17?i.allowEmptyContent?!0:(c(4,[],[]),!1):h()?(n.getToken()!==17&&c(9,[],[]),!0):(c(4,[],[]),!1)}var C;(function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",e[e.InvalidCharacter=6]="InvalidCharacter"})(C||(C={}));var ee;(function(e){e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.Unknown=16]="Unknown",e[e.EOF=17]="EOF"})(ee||(ee={}));const Ae=de;var ne;(function(e){e[e.InvalidSymbol=1]="InvalidSymbol",e[e.InvalidNumberFormat=2]="InvalidNumberFormat",e[e.PropertyNameExpected=3]="PropertyNameExpected",e[e.ValueExpected=4]="ValueExpected",e[e.ColonExpected=5]="ColonExpected",e[e.CommaExpected=6]="CommaExpected",e[e.CloseBraceExpected=7]="CloseBraceExpected",e[e.CloseBracketExpected=8]="CloseBracketExpected",e[e.EndOfFileExpected=9]="EndOfFileExpected",e[e.InvalidCommentToken=10]="InvalidCommentToken",e[e.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=12]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",e[e.InvalidUnicode=14]="InvalidUnicode",e[e.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",e[e.InvalidCharacter=16]="InvalidCharacter"})(ne||(ne={}));const te=(e,l)=>Ae(we(l,e,"utf8")),R=Symbol("implicitBaseUrl"),_e=()=>{const{findPnpApi:e}=ve.default;return e&&e(process.cwd())},G=(e,l,i,n)=>{const t=`resolveFromPackageJsonPath:${e}:${l}:${i}`;if(n!=null&&n.has(t))return n.get(t);const o=te(e,n);if(!o)return;let s=l||"tsconfig.json";if(!i&&o.exports)try{const[g]=be.resolveExports(o.exports,l,["require","types"]);s=g}catch{return!1}else!l&&o.tsconfig&&(s=o.tsconfig);return s=p.default.join(e,"..",s),n==null||n.set(t,s),s},z="package.json",Q="tsconfig.json",$e=(e,l,i)=>{let n=e;if(e===".."&&(n=p.default.join(n,Q)),e[0]==="."&&(n=p.default.resolve(l,n)),p.default.isAbsolute(n)){if($(i,n)){if(P(i,n).isFile())return n}else if(!n.endsWith(".json")){const v=`${n}.json`;if($(i,v))return v}return}const[t,...o]=e.split("/"),s=t[0]==="@"?`${t}/${o.shift()}`:t,g=o.join("/"),f=_e();if(f){const{resolveRequest:v}=f;try{if(s===e){const T=v(p.default.join(s,z),l);if(T){const k=G(T,g,!1,i);if(k&&$(i,k))return k}}else{let T;try{T=v(e,l,{extensions:[".json"]})}catch{T=v(p.default.join(e,Q),l)}if(T)return T}}catch{}}const b=Z(l,p.default.join("node_modules",s),i);if(!b||!P(i,b).isDirectory())return;const w=p.default.join(b,z);if($(i,w)){const v=G(w,g,!1,i);if(v===!1)return;if(v&&$(i,v)&&P(i,v).isFile())return v}const r=p.default.join(b,g),B=r.endsWith(".json");if(!B){const v=`${r}.json`;if($(i,v))return v}if($(i,r)){if(P(i,r).isDirectory()){const v=p.default.join(r,z);if($(i,v)){const k=G(v,"",!0,i);if(k&&$(i,k))return k}const T=p.default.join(r,Q);if($(i,T))return T}else if(B)return r}},Be=(e,l,i,n)=>{const t=$e(e,l,n);if(!t)throw new Error(`File '${e}' not found.`);if(i.has(t))throw new Error(`Circularity detected while resolving configuration: ${t}`);i.add(t);const o=p.default.dirname(t),s=ie(t,n,i);delete s.references;const{compilerOptions:g}=s;if(g){const f=["baseUrl","outDir"];for(const b of f){const w=g[b];w&&(g[b]=_(p.default.relative(l,p.default.join(o,w)))||"./")}}return s.files&&(s.files=s.files.map(f=>_(p.default.relative(l,p.default.join(o,f))))),s.include&&(s.include=s.include.map(f=>_(p.default.relative(l,p.default.join(o,f))))),s.exclude&&(s.exclude=s.exclude.map(f=>_(p.default.relative(l,p.default.join(o,f))))),s},ie=(e,l,i=new Set)=>{let n;try{n=Te(l,e)}catch{throw new Error(`Cannot resolve tsconfig at path: ${e}`)}let t=te(n,l)||{};if(typeof t!="object")throw new SyntaxError(`Failed to parse tsconfig at: ${e}`);const o=p.default.dirname(n);if(t.compilerOptions){const{compilerOptions:s}=t;s.paths&&!s.baseUrl&&(s[R]=o)}if(t.extends){const s=Array.isArray(t.extends)?t.extends:[t.extends];delete t.extends;for(const g of s.reverse()){const f=Be(g,o,i,l),b={...f,...t,compilerOptions:{...f.compilerOptions,...t.compilerOptions}};f.watchOptions&&(b.watchOptions={...f.watchOptions,...t.watchOptions}),t=b}}if(t.compilerOptions){const{compilerOptions:s}=t,g=["baseUrl","rootDir"];for(const b of g){const w=s[b];if(w){const r=p.default.resolve(o,w),B=W(p.default.relative(o,r));s[b]=B}}const{outDir:f}=s;f&&(Array.isArray(t.exclude)||(t.exclude=[]),t.exclude.includes(f)||t.exclude.push(f),s.outDir=W(f))}else t.compilerOptions={};if(t.files&&(t.files=t.files.map(W)),t.include&&(t.include=t.include.map(_)),t.watchOptions){const{watchOptions:s}=t;s.excludeDirectories&&(s.excludeDirectories=s.excludeDirectories.map(g=>_(p.default.resolve(o,g))))}return t},le=(e,l=new Map)=>ie(e,l),Le=(e=process.cwd(),l="tsconfig.json",i=new Map)=>{const n=Z(_(e),l,i);if(!n)return null;const t=le(n,i);return{path:n,config:t}},Ee=/\*/g,se=(e,l)=>{const i=e.match(Ee);if(i&&i.length>1)throw new Error(l)},Ue=e=>{if(e.includes("*")){const[l,i]=e.split("*");return{prefix:l,suffix:i}}return e},Fe=({prefix:e,suffix:l},i)=>i.startsWith(e)&&i.endsWith(l),Ne=(e,l,i)=>Object.entries(e).map(([n,t])=>(se(n,`Pattern '${n}' can have at most one '*' character.`),{pattern:Ue(n),substitutions:t.map(o=>{if(se(o,`Substitution '${o}' in pattern '${n}' can have at most one '*' character.`),!l&&!M.test(o))throw new Error("Non-relative paths are not allowed when 'baseUrl' is not set. Did you forget a leading './'?");return p.default.resolve(i,o)})})),ye=e=>{if(!e.config.compilerOptions)return null;const{baseUrl:l,paths:i}=e.config.compilerOptions,n=R in e.config.compilerOptions&&e.config.compilerOptions[R];if(!l&&!i)return null;const t=p.default.resolve(p.default.dirname(e.path),l||n||"."),o=i?Ne(i,l,t):[];return s=>{if(M.test(s))return[];const g=[];for(const r of o){if(r.pattern===s)return r.substitutions.map(_);typeof r.pattern!="string"&&g.push(r)}let f,b=-1;for(const r of g)Fe(r.pattern,s)&&r.pattern.prefix.length>b&&(b=r.pattern.prefix.length,f=r);if(!f)return l?[_(p.default.join(t,s))]:[];const w=s.slice(f.pattern.prefix.length,s.length-f.pattern.suffix.length);return f.substitutions.map(r=>_(r.replace("*",w)))}},oe=e=>{let l="";for(let i=0;i<e.length;i+=1){const n=e[i],t=n.toUpperCase();l+=n===t?n.toLowerCase():t}return l},Pe=65,xe=97,Ie=()=>Math.floor(Math.random()*26),De=e=>Array.from({length:e},()=>String.fromCodePoint(Ie()+(Math.random()>.5?Pe:xe))).join(""),he=(e=V.default)=>{const l=process.execPath;if(e.existsSync(l))return!e.existsSync(oe(l));const i=`/${De(10)}`;e.writeFileSync(i,"");const n=!e.existsSync(oe(i));return e.unlinkSync(i),n},{join:I}=p.default.posix,H={ts:[".ts",".tsx",".d.ts"],cts:[".cts",".d.cts"],mts:[".mts",".d.mts"]},Se=e=>{const l=[...H.ts],i=[...H.cts],n=[...H.mts];return e!=null&&e.allowJs&&(l.push(".js",".jsx"),i.push(".cjs"),n.push(".mjs")),[...l,...i,...n]},Ve=e=>{const l=[];if(!e)return l;const{outDir:i,declarationDir:n}=e;return i&&l.push(i),n&&l.push(n),l},ue=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Me=["node_modules","bower_components","jspm_packages"],q=`(?!(${Me.join("|")})(/|$))`,We=/(?:^|\/)[^.*?]+$/,fe="**/*",D="[^/]",X="[^./]",re=process.platform==="win32",Je=({config:e,path:l},i=he())=>{if("extends"in e)throw new Error("tsconfig#extends must be resolved. Use getTsconfig or parseTsconfig to resolve it.");if(!p.default.isAbsolute(l))throw new Error("The tsconfig path must be absolute");re&&(l=_(l));const n=p.default.dirname(l),{files:t,include:o,exclude:s,compilerOptions:g}=e,f=t==null?void 0:t.map(k=>I(n,k)),b=Se(g),w=i?"":"i",B=(s||Ve(g)).map(k=>{const j=I(n,k),L=ue(j).replace(/\\\*\\\*\//g,"(.+/)?").replace(/\\\*/g,`${D}*`).replace(/\\\?/g,D);return new RegExp(`^${L}($|/)`,w)}),v=t||o?o:[fe],T=v?v.map(k=>{let j=I(n,k);We.test(j)&&(j=I(j,fe));const L=ue(j).replace(/\/\\\*\\\*/g,`(/${q}${X}${D}*)*?`).replace(/(\/)?\\\*/g,(E,u)=>{const a=`(${X}|(\\.(?!min\\.js$))?)*`;return u?`/${q}${X}${a}`:a}).replace(/(\/)?\\\?/g,(E,u)=>{const a=D;return u?`/${q}${a}`:a});return new RegExp(`^${L}$`,w)}):void 0;return k=>{if(!p.default.isAbsolute(k))throw new Error("filePath must be absolute");if(re&&(k=_(k)),f!=null&&f.includes(k))return e;if(!(!b.some(j=>k.endsWith(j))||B.some(j=>j.test(k)))&&T&&T.some(j=>j.test(k)))return e}};exports.createFilesMatcher=Je,exports.createPathsMatcher=ye,exports.getTsconfig=Le,exports.parseTsconfig=le;
